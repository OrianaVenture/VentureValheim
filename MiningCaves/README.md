# Mining Caves

Created by [OrianaVentureMod@gmail.com](https://github.com/OrianaVenture/VentureValheim).

## Introduction

Adds two new caves to the world containing ore for mining. Adds the ability to disable terrain changes caused by tools.

## Features

* Adds a cave for mining Copper and Tin in the Black Forest (prefab name VV_CopperTinCave)
* Adds a cave for mining Silver in the Mountains (prefab name VV_SilverCave)
* Adds the ability to prevent player terrain changes from tools

This mod can be very useful on large servers where surface ores are quickly exhausted. Use Location Reset with this mod to regenerate caves and refresh the ore supply.

### Adding Caves

If creating a new world with this mod installed the caves will be added automatically on world generation. If you are adding this to an existing world you can run the vanilla "genloc" command to add caves to unexplored areas of the map. If your map is heavily explored you will need to use another mod to automatically add the locations to explored areas.

### Locking Terrain Changes

I think terrain changes in general look ugly. This was the main idea that inspired the whole mod. To prevent players from being able to modify the terrain set the LockTerrain configuration to True. The AdminBypass configuration will allow all admins to still perform terrain changes when turned on. If there are items you would like the mod to ignore add the prefab names to the LockTerrainIgnoreItems configuration as a comma-separated string (for example: Cultivator, Hoe, PickaxeAntler). This should work with custom items added by other mods. All original piece table entries on tools (like the Hoe) that have a "raise" component are removed with this feature to prevent players from spending resources accidentally.

This feature can potentially prevent players from mining the default silver nodes in the mountains. Ensure enough silver caves are generated by checking your log file on first world generation. Use the command "find VV_SilverCave 50" in game after creating a world to have all these locations added to your map as pins. This will help you ensure the world had a good spawn. Example of the warning message displayed in your log file on a bad spawn:

```
Failed to place all VV_SilverCave, placed 5 out of 50
```

### Pathside Assistance

When using this mod with Pathside Assistance it will behave differently when terrain changes are turned off. All the terrain altering operations (smooth, level) will be disabled before creating the alternate pieces thus all new entries will be twice as large as the original.

### Possible Future Improvements

* World generation option to not place silver nodes and/or
* Removal of the wishbone ping from unobtainable silver nodes

## Installation

This mod needs to be on both the client and server; the mod will enforce installation. Players without the mod will NOT be able to connect to the server. Config Syncing is included with Jotunn. The server with enforce the same mod configuration for all players. Live changes to the configurations will not always take effect until the player relogs into the world/server.

If the mod is removed from the server after locations have been generated the caves will not reappear, but some things will remain in the world. Adding the mod back after removing it will restore all caves previously generated in the same place.

## Changelog

### 0.1.2

* Fixed copper node in cave painting the surface terrain.
* Tweaked silver cave spawn rates, about 40 should be placed consistently now on world generation.
* Fixed Tin falling out of caves.

### 0.1.1

* Fixed an issue where items like ores would sometimes not display (needed to clear mesh cache for mocking).
* Added missing file watcher for updating configurations without a server restart.

### 0.1.0

* First release

## Contributing

All issues can be reported on the project Github. To report issues please be as specific as possible and provide the following:

1. Version of this mod you are using.
2. List of the other mods being used.

All feedback, ideas, and requests are welcome! You can message me at my discord [Venture Gaming](https://discord.gg/tAd5hapt88).